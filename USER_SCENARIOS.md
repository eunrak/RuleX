# Policy LLM - 사용자 시나리오 및 개선 계획

## 📋 목차
1. [현재 구현된 주요 기능](#현재-구현된-주요-기능)
2. [사용자 시나리오](#사용자-시나리오)
3. [추가 기능 제안](#추가-기능-제안)
4. [개선 사항](#개선-사항)
5. [우선순위 로드맵](#우선순위-로드맵)

---

## 🎯 현재 구현된 주요 기능

### 1. **정책서 및 데이터 소스 관리**
- ✅ 10개 정책서 표시 (내부회계, ESG, 사규, 보안, IT)
- ✅ 5개 데이터베이스 연결 상태 표시
- ✅ 활성/비활성 상태 관리
- ✅ 카테고리별 분류

### 2. **AI 기반 자연어 질의응답**
- ✅ 정책서 내용 조회
- ✅ 위반 사항 검색
- ✅ 정책 조항 인용 표시
- ✅ 제안된 질문 (Suggested Prompts)

### 3. **위반 사항 모니터링**
- ✅ 5가지 유형의 위반 감지
- ✅ 심각도 표시 (critical, high, medium)
- ✅ 실시간 위반 건수 표시
- ✅ 정책 조항 연결

### 4. **자동 수정 및 액션**
- ✅ 위반 사항 상세 조회
- ✅ 자동 알림 발송
- ✅ 수정 조치 실행
- ✅ 처리 결과 피드백

### 5. **스튜디오 AI 도구**
- ✅ FAQ 생성
- ✅ 브리핑 문서
- ✅ 학습 가이드
- ✅ 타임라인
- ✅ 메모 추가

### 6. **반응형 UI/UX**
- ✅ 패널 크기 조절 (60px ~ 600px/800px)
- ✅ 패널 접기/펼치기
- ✅ 3단계 반응형 모드 (전체/컴팩트/미니)
- ✅ 슬라이딩 애니메이션

---

## 👥 사용자 시나리오

### 시나리오 1: 컴플라이언스 담당자 - 일일 점검
**페르소나**: 김지원 과장 (컴플라이언스팀)

#### 🌅 아침 업무 시작
1. **시스템 접속**
   - Policy LLM 대시보드 오픈
   - 우측 스튜디오 패널에서 **5건의 위반사항** 확인
   - 치명적(critical) 2건에 주목

2. **위반 사항 상세 확인**
   - "관리자 권한 무단 접근" 클릭
   - 위반 데이터 테이블 확인 (사번, 이름, 부서, 위반일)
   - 정책 조항 확인: "접근권한 관리 규정, 제3.1조"

3. **AI에게 질문**
   - 입력: "이번 달 정보보안 정책 위반 현황은?"
   - AI 응답: 23명의 비밀번호 미변경 위반 확인
   - 액션 버튼: "위반자 목록 보기", "자동 알림 발송"

4. **자동 조치 실행**
   - "자동 알림 발송" 클릭
   - 23명에게 비밀번호 변경 안내 메일 자동 발송
   - 위반 건수 감소 확인

#### 💼 업무 중
5. **정책 조회**
   - 입력: "개인정보보호 지침의 주요 내용 요약해줘"
   - AI가 정책서 제5.3조 내용 요약 제공
   - 소스 인용 표시로 신뢰도 확보

6. **보고서 작성**
   - 우측 스튜디오 → AI 도구 탭
   - "브리핑 문서" 클릭
   - 경영진용 주간 컴플라이언스 보고서 자동 생성

---

### 시나리오 2: IT 보안 관리자 - 긴급 대응
**페르소나**: 박민수 차장 (정보보안팀)

#### 🚨 긴급 알림 수신
1. **위반 감지**
   - 스튜디오 패널에 빨간 배지 깜빡임
   - "관리자 권한 무단 접근" 3건 (치명적)

2. **즉시 조회**
   - 위반 카드 클릭 → "검토 및 수정" 버튼
   - 상세 데이터 확인:
     - 사번: E2024001, 이름: 김철수, 부서: IT운영팀
     - 승인되지 않은 IP에서 접근

3. **AI 분석 요청**
   - 입력: "관리자 권한 무단 접근 패턴 분석해줘"
   - AI가 접근 로그 분석 결과 제공
   - SQL 쿼리 자동 생성

4. **긴급 조치**
   - "모두 수정" 버튼 클릭
   - 해당 계정 임시 정지
   - 보안팀에 긴급 알림 발송

---

### 시나리오 3: 인사팀 - ESG 교육 관리
**페르소나**: 이영희 대리 (인사팀)

#### 📚 교육 관리
1. **미이수자 확인**
   - 제안된 질문 클릭: "ESG 관련 미이수 교육 대상자 조회해줘"
   - AI 응답: 47명 미이수 확인
   - 정책 근거: "ESG 경영 가이드라인 2024, 제2.4조"

2. **대상자 조회**
   - "미이수자 조회" 버튼 클릭
   - 사번, 이름, 부서, 입사일 테이블 표시
   - 엑셀 다운로드 (향후 기능)

3. **교육 안내 발송**
   - "교육 안내 발송" 버튼 클릭
   - 47명에게 자동 메일 발송
   - 위반 건수 감소 확인

4. **학습 가이드 생성**
   - 스튜디오 → AI 도구 → "학습 가이드"
   - 신입 직원용 ESG 온보딩 자료 자동 생성

---

### 시나리오 4: 재무팀 - 내부회계 점검
**페르소나**: 최재현 팀장 (재무팀)

#### 💰 회계 감사
1. **승인 절차 위반 확인**
   - 입력: "내부회계 승인 절차 위반 사례 분석"
   - AI 응답: 2건의 이중 승인 누락 발견
   - 5천만원 이상 지출 건

2. **상세 조회**
   - "위반 건 상세보기" 클릭
   - 거래 ID, 금액, 승인자 수 확인
   - 정책 근거: "내부회계관리제도 운영규정 v3.2, 제7.1조"

3. **긴급 알림**
   - "긴급 알림 발송" 클릭
   - 담당자 및 승인권자에게 즉시 알림
   - 감사 로그 기록

---

## 🚀 추가 기능 제안

### A. 데이터 시각화 및 대시보드

#### A1. 위반 현황 대시보드
```
┌─────────────────────────────────────┐
│  📊 위반 현황 요약                    │
├─────────────────────────────────────┤
│  이번 주: 83건 (↑ 12%)               │
│  치명적: 5건 | 높음: 23건 | 중간: 55건│
│                                     │
│  [차트] 일별 위반 추이               │
│  [차트] 카테고리별 분포              │
│  [차트] 부서별 위반 현황             │
└─────────────────────────────────────┘
```

**구현 방법**:
- Chart.js 또는 Recharts 사용
- 실시간 데이터 업데이트
- 드릴다운 기능 (클릭 시 상세 조회)

#### A2. 정책 적용 현황 타임라인
```
2024-11 ━━━━━━━━━━━━━━━━━━━━━━━━━━
  ├─ 11/01: 정보보안 정책서 v5.1 적용
  ├─ 11/15: ESG 가이드라인 업데이트
  └─ 11/30: 내부회계 규정 개정
```

**구현 방법**:
- Framer Motion으로 애니메이션
- 정책 변경 이력 추적
- 영향받은 규칙 표시

---

### B. 고급 검색 및 필터링

#### B1. 다중 조건 검색
```
┌─────────────────────────────────────┐
│  🔍 고급 검색                        │
├─────────────────────────────────────┤
│  정책 카테고리: [보안] [ESG] [회계] │
│  심각도: [치명적] [높음] [중간]      │
│  기간: [2024-11-01] ~ [2024-11-30]  │
│  부서: [전체]                        │
│                                     │
│  [검색]  [초기화]                   │
└─────────────────────────────────────┘
```

#### B2. 저장된 검색 쿼리
- 자주 사용하는 검색 조건 저장
- 원클릭 재검색
- 팀원과 공유 가능

---

### C. 협업 및 워크플로우

#### C1. 위반 사항 할당 및 추적
```
위반 ID: V2024-1123
담당자: 김철수 (IT운영팀)
상태: [처리 중] 
마감일: 2024-12-05
댓글: 3건

[할당] [상태 변경] [댓글 추가]
```

#### C2. 승인 워크플로우
```
수정 조치 요청
├─ 1단계: 담당자 검토 ✅
├─ 2단계: 팀장 승인 ⏳
└─ 3단계: 실행 ⬜
```

---

### D. 알림 및 리포팅

#### D1. 스마트 알림 설정
```
┌─────────────────────────────────────┐
│  🔔 알림 설정                        │
├─────────────────────────────────────┤
│  ☑ 치명적 위반 발생 시 즉시 알림     │
│  ☑ 일일 요약 리포트 (09:00)         │
│  ☑ 주간 리포트 (월요일 09:00)       │
│  ☐ 정책 변경 시 알림                │
│                                     │
│  알림 채널:                          │
│  ☑ 이메일  ☑ Slack  ☐ Teams        │
└─────────────────────────────────────┘
```

#### D2. 자동 리포트 생성
- 일일/주간/월간 리포트
- PDF/Excel 다운로드
- 경영진용 요약 버전

---

### E. 정책 관리 기능

#### E1. 정책 버전 관리
```
정보보안 정책서
├─ v5.1 (현재) - 2024-11-01
├─ v5.0 - 2024-06-01
└─ v4.2 - 2023-12-01

[비교] [롤백] [변경 이력]
```

#### E2. 정책 영향 분석
```
"정보보안 정책서 v5.1" 변경 시:
- 영향받는 규칙: 12개
- 영향받는 직원: 1,523명
- 예상 위반 건수: +15건

[시뮬레이션] [적용]
```

---

### F. AI 기능 강화

#### F1. 자동 규칙 생성
```
AI: "정보보안 정책서 4.2조를 분석한 결과,
     다음 규칙을 생성할 것을 제안합니다:

규칙명: 비밀번호 90일 미변경 감지
SQL: SELECT employee_id FROM hr_master 
     WHERE last_password_change < SYSDATE - 90
스케줄: 매일 09:00
알림: 담당자 + 본인

[규칙 생성] [수정] [취소]"
```

#### F2. 이상 패턴 감지
```
AI: "⚠️ 비정상 패턴 감지

IT운영팀에서 평소 대비 3배 많은 관리자 권한 
접근이 발생했습니다. (11/25 ~ 11/30)

의심 활동:
- 심야 시간대 접근 증가 (22:00 ~ 06:00)
- 새로운 IP 주소에서 접근

[상세 조회] [조사 시작]"
```

#### F3. 정책 질의응답 개선
- 다중 정책서 교차 참조
- 유사 사례 검색
- 판례/선례 제시

---

### G. 데이터 연동 강화

#### G1. 실시간 데이터 연결
- 현재: Mock 데이터
- 개선: 실제 DB 연결 (Oracle, SAP HANA 등)
- WebSocket으로 실시간 업데이트

#### G2. 외부 시스템 통합
- HR 시스템 (인사 정보)
- ERP (재무 데이터)
- SIEM (보안 로그)
- 교육 시스템 (이수 현황)

---

## 🔧 개선 사항

### UI/UX 개선

#### 1. **패널 상태 저장**
**현재 문제**: 새로고침 시 패널 크기/상태 초기화
**개선안**:
```javascript
// LocalStorage에 패널 상태 저장
localStorage.setItem('leftPanelWidth', leftPanelWidth);
localStorage.setItem('isLeftCollapsed', isLeftCollapsed);
```

#### 2. **키보드 단축키**
```
Ctrl + K: 검색 포커스
Ctrl + /: 명령 팔레트
Ctrl + B: 왼쪽 패널 토글
Ctrl + .: 오른쪽 패널 토글
Esc: 모달 닫기
```

#### 3. **다크/라이트 모드 전환**
- 현재: 다크 모드만 지원
- 개선: 토글 버튼 추가
- 시스템 설정 자동 감지

#### 4. **로딩 상태 표시**
```jsx
{isLoading && (
  <div className="flex items-center gap-2">
    <Spinner />
    <span>정책서 분석 중...</span>
  </div>
)}
```

#### 5. **에러 핸들링**
```jsx
{error && (
  <Alert variant="error">
    <AlertTriangle size={16} />
    {error.message}
    <button onClick={retry}>재시도</button>
  </Alert>
)}
```

---

### 성능 개선

#### 1. **가상 스크롤링**
- 정책서 목록이 많을 때 성능 저하 방지
- react-window 또는 react-virtual 사용

#### 2. **메모이제이션**
```javascript
const filteredPolicies = useMemo(() => 
  policies.filter(p => p.status === 'active'),
  [policies]
);
```

#### 3. **지연 로딩**
- AI 도구 컴포넌트 lazy loading
- 이미지 최적화

---

### 데이터 관리 개선

#### 1. **상태 관리 라이브러리 도입**
- 현재: useState만 사용
- 개선: Zustand 또는 Redux Toolkit
```javascript
// store.js
const usePolicyStore = create((set) => ({
  policies: [],
  violations: [],
  addViolation: (violation) => 
    set((state) => ({ 
      violations: [...state.violations, violation] 
    })),
}));
```

#### 2. **API 레이어 분리**
```javascript
// api/policyService.js
export const fetchPolicies = async () => {
  const response = await fetch('/api/policies');
  return response.json();
};

export const createRule = async (rule) => {
  const response = await fetch('/api/rules', {
    method: 'POST',
    body: JSON.stringify(rule),
  });
  return response.json();
};
```

---

### 보안 개선

#### 1. **인증/인가**
```javascript
// 현재: 인증 없음
// 개선: JWT 토큰 기반 인증
const ProtectedRoute = ({ children }) => {
  const { user } = useAuth();
  return user ? children : <Navigate to="/login" />;
};
```

#### 2. **역할 기반 접근 제어 (RBAC)**
```javascript
const permissions = {
  admin: ['read', 'write', 'delete', 'approve'],
  compliance: ['read', 'write', 'approve'],
  viewer: ['read'],
};
```

#### 3. **감사 로그**
- 모든 수정 조치 기록
- 사용자 활동 추적
- 규정 준수 증명

---

### 접근성 개선

#### 1. **ARIA 레이블**
```jsx
<button 
  aria-label="패널 접기"
  aria-expanded={!isCollapsed}
>
  <PanelLeftClose />
</button>
```

#### 2. **키보드 네비게이션**
- Tab 순서 최적화
- Focus 표시 개선

#### 3. **스크린 리더 지원**
- 의미있는 HTML 구조
- Live region 사용

---

## 📅 우선순위 로드맵

### Phase 1: 핵심 기능 완성 (1-2주)
**목표**: 데모 가능한 MVP 완성

- [x] 정책서 및 DB 연결 표시
- [x] AI 질의응답 기본 기능
- [x] 위반 사항 모니터링
- [x] 자동 수정 기능
- [ ] **실제 DB 연결** (Mock → Real)
- [ ] **데이터 시각화** (차트 추가)
- [ ] **검색 기능 강화**

### Phase 2: UX/성능 개선 (2-3주)
**목표**: 사용성 및 안정성 향상

- [ ] 패널 상태 저장 (LocalStorage)
- [ ] 키보드 단축키
- [ ] 로딩/에러 상태 처리
- [ ] 다크/라이트 모드
- [ ] 성능 최적화 (메모이제이션, 가상 스크롤)
- [ ] 반응형 디자인 개선 (모바일)

### Phase 3: 협업 기능 (3-4주)
**목표**: 팀 협업 지원

- [ ] 위반 사항 할당 및 추적
- [ ] 댓글 및 토론 기능
- [ ] 승인 워크플로우
- [ ] 알림 시스템 (이메일, Slack)
- [ ] 자동 리포트 생성

### Phase 4: AI 고도화 (4-6주)
**목표**: 지능형 분석 및 자동화

- [ ] 자동 규칙 생성
- [ ] 이상 패턴 감지
- [ ] 정책 영향 분석
- [ ] 다중 정책서 교차 참조
- [ ] 자연어 SQL 생성 개선

### Phase 5: 엔터프라이즈 기능 (6-8주)
**목표**: 대규모 조직 지원

- [ ] 인증/인가 시스템
- [ ] 역할 기반 접근 제어
- [ ] 감사 로그 및 규정 준수
- [ ] 정책 버전 관리
- [ ] 외부 시스템 통합 (HR, ERP, SIEM)
- [ ] 멀티 테넌트 지원

---

## 💡 즉시 구현 가능한 Quick Wins

### 1. **검색 기능 추가** (1일)
```jsx
const [searchQuery, setSearchQuery] = useState('');
const filteredPolicies = policies.filter(p => 
  p.name.toLowerCase().includes(searchQuery.toLowerCase())
);
```

### 2. **정책 카테고리 필터** (1일)
```jsx
const [selectedCategory, setSelectedCategory] = useState('all');
const categories = ['전체', '내부회계', 'ESG', '보안', 'IT', '사규'];
```

### 3. **위반 건수 배지 애니메이션** (0.5일)
```jsx
<motion.div
  animate={{ scale: [1, 1.2, 1] }}
  transition={{ repeat: Infinity, duration: 2 }}
>
  {violations.length}
</motion.div>
```

### 4. **복사 기능** (0.5일)
```jsx
const copyToClipboard = (text) => {
  navigator.clipboard.writeText(text);
  toast.success('복사되었습니다!');
};
```

### 5. **다운로드 기능** (1일)
```jsx
const downloadCSV = (data) => {
  const csv = convertToCSV(data);
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'violations.csv';
  a.click();
};
```

---

## 🎯 핵심 개선 포인트 요약

### 즉시 개선 필요 (High Priority)
1. ✅ **실제 데이터 연동** - Mock에서 Real DB로
2. ✅ **검색 및 필터링** - 사용성 향상
3. ✅ **데이터 시각화** - 차트 및 대시보드
4. ✅ **에러 핸들링** - 안정성 확보
5. ✅ **상태 관리** - Zustand 도입

### 중요 개선 (Medium Priority)
6. ⚠️ **키보드 단축키** - 파워 유저 지원
7. ⚠️ **알림 시스템** - 실시간 알림
8. ⚠️ **리포트 생성** - 자동화
9. ⚠️ **협업 기능** - 할당 및 추적
10. ⚠️ **성능 최적화** - 대용량 데이터 처리

### 장기 개선 (Low Priority)
11. 📌 **인증/인가** - 보안 강화
12. 📌 **정책 버전 관리** - 이력 추적
13. 📌 **외부 시스템 통합** - 확장성
14. 📌 **AI 고도화** - 자동 규칙 생성
15. 📌 **모바일 최적화** - 반응형 개선

---

## 📊 성공 지표 (KPI)

### 사용성
- 평균 작업 완료 시간: < 30초
- 클릭 수: < 3회
- 사용자 만족도: > 4.5/5

### 성능
- 페이지 로드 시간: < 2초
- AI 응답 시간: < 3초
- 동시 사용자: > 100명

### 비즈니스
- 위반 사항 감소율: > 30%
- 정책 준수율: > 95%
- 자동화율: > 70%

---

## 🔗 참고 자료

### 유사 제품 벤치마크
- **ServiceNow GRC**: 워크플로우 및 할당 기능
- **LogicGate Risk Cloud**: 시각화 및 대시보드
- **OneTrust**: 정책 관리 및 버전 관리
- **Compliance.ai**: AI 기반 규정 분석

### 기술 스택 고려사항
- **상태 관리**: Zustand (가볍고 간단)
- **차트**: Recharts (React 친화적)
- **테이블**: TanStack Table (고성능)
- **폼**: React Hook Form (유효성 검사)
- **알림**: React Hot Toast (UX 우수)
